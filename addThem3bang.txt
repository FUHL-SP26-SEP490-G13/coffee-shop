CREATE TABLE newsletter_subscribers (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(255) NOT NULL UNIQUE,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE news (
  id INT NOT NULL AUTO_INCREMENT,
  title VARCHAR(255) NOT NULL,
  slug VARCHAR(255) NOT NULL UNIQUE,
  thumbnail VARCHAR(255) DEFAULT NULL,
  summary TEXT,
  content LONGTEXT NOT NULL,
  created_by INT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  CONSTRAINT fk_news_user FOREIGN KEY (created_by)
    REFERENCES users(id)
);

CREATE TABLE vouchers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    code VARCHAR(50) NOT NULL UNIQUE,            -- Mã voucher (VD: SALE10)
    discount_type ENUM('percent', 'fixed') 
        NOT NULL DEFAULT 'percent',              -- Kiểu giảm: % hoặc tiền
    discount_value DECIMAL(10,2) NOT NULL,      -- Giá trị giảm (VD: 10 hoặc 50000)
    min_order_value DECIMAL(10,2) DEFAULT 0,    -- Đơn tối thiểu để áp dụng
    max_discount DECIMAL(10,2) DEFAULT NULL,    -- Giảm tối đa (chỉ dùng cho %)
    usage_limit INT DEFAULT NULL,               -- Tổng số lượt được phép dùng
    used_count INT DEFAULT 0,                   -- Đã dùng bao nhiêu lần
    start_date DATETIME NOT NULL,               -- Ngày bắt đầu
    end_date DATETIME NOT NULL,                 -- Ngày kết thúc
    is_active BOOLEAN DEFAULT TRUE,             -- Có đang hoạt động không
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP 
        ON UPDATE CURRENT_TIMESTAMP
);